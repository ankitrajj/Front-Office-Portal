<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Add Enquiry</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="/webjars/jquery/3.6.4/jquery.min.js"></script>
<script>
  $(document).ready(function(){
     $(".form-select").on("change", function(e){
        $.ajax({
         type : "GET",
         url: "filter-enquiries",
         data:{
           cname : $("#cname").val(),
           mode : $("#mode").val(),
           status : $("#status").val()
         },
         success: function(result){
            $("#enqTable").hide();
            $("#filteredTable").html(result);
        }
        });
     });
});


</script>
</head>
<body class="container-fluid">
<h2>View Enquiry</h2>
 <div class="d-flex justify-content-between align-items-center">
  <dl>
    <dt>Class Mode:</dt>
    <dd>
      <select class="form-select" id="mode">
        <option value="">--Select--</option>
        <option value="classroom">Classroom</option>
        <option value="online">Online</option>
      </select>
    </dd>
    <dt>Course Name:</dt>
    <dd>
      <select class="form-select" id="cname">
        <option value="">--Select--</option>
        <option th:each="course : ${courseList}" th:value="${course}" th:text="${course}"></option>
      </select>
    </dd>
    <dt>Enquiry Status:</dt>
    <dd>
      <select class="form-select" id="status">
        <option value="">--Select--</option>
        <option th:each="status : ${statusList}" th:value="${status}" th:text="${status}"></option>
      </select>
    </dd>
  </dl>

<div id="enqTable">
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th>#</th>
        <th>Enquiry Id</th>
        <th>Student Name</th>
        <th>Class Mode</th>
        <th>Course Name</th>
        <th>Enquiry Status</th>
        <th>Enquiry Date</th>
        <th>Edit Action</th>
        <th>Delete Action</th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="enq, enqStat : ${enquiries}">
        <td th:text="${enqStat.index + 1}"></td>
        <td th:text="${enq.enquiryId}"></td>
        <td th:text="${enq.studentName}"></td>
        <td th:text="${enq.classMode}"></td>
        <td th:text="${enq.courseName}"></td>
        <td th:text="${enq.enquiryStatus}"></td>
        <td th:text="${#temporals.format(enq.createdDate, 'dd-MM-yyyy')}"></td>
        <td><a th:href="@{/edit}">Edit</a></td>
        <td><a th:href="@{/delete/{id}(id=${enq.enquiryId})}">Delete</a></td>
      </tr>
    </tbody>
  </table>
 </div>
 <div id="filteredTable">
 </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" ></script>
</body>
</html>